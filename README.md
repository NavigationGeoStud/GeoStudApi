# GeoStud API

Web API –¥–ª—è —Å–±–æ—Ä–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### üè† –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (SQLite)

```bash
dotnet run --project GeoStud.Api.csproj -- --sqlite
```

### üè≠ Production (SQL Server)

```bash
dotnet run --project GeoStud.Api.csproj --environment Production
```

### üéØ –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

**SQLite —Ä–µ–∂–∏–º (–ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞):**
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `GeoStudLocal.db` (—Ñ–∞–π–ª)
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç SQL Server
- CORS: —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

**SQL Server —Ä–µ–∂–∏–º (production):**
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: SQL Server
- –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- CORS: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

### üìä –î–æ—Å—Ç—É–ø –∫ API

- **Swagger UI**: `https://localhost:5001`
- **API**: `https://localhost:5001/api/v1/`
- **Health Check**: `https://localhost:5001/api/v1/health`

### üîê –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
- Username: `admin`
- Password: `Admin123!`

**–°–µ—Ä–≤–∏—Å–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã:**
- Client ID: `mobile-app`, Secret: `MobileAppSecret123!`
- Client ID: `web-app`, Secret: `WebAppSecret123!`

### üìù –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
```bash
curl -X POST https://localhost:5001/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"Admin123!"}'
```

**2. –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–ø—Ä–æ—Å–∞:**
```bash
curl -X POST https://localhost:5001/api/v1/survey/submit \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "ageRange": "17-22",
    "isStudent": true,
    "gender": "Male",
    "isLocal": true,
    "interests": ["–£—á–µ–±–∞", "–°–ø–æ—Ä—Ç"],
    "budget": "500",
    "activityTime": "Evening",
    "socialPreference": "Group"
  }'
```

**3. –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:**
```bash
curl -X GET https://localhost:5001/api/v1/analytics/comprehensive \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/v1/auth/login` - –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/v1/auth/service-login` - –í—Ö–æ–¥ —Å–µ—Ä–≤–∏—Å–∞

### –û–ø—Ä–æ—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- `POST /api/v1/survey/submit` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–ø—Ä–æ—Å–∞
- `GET /api/v1/survey/{id}` - –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–ø—Ä–æ—Å–∞

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- `GET /api/v1/analytics/comprehensive` - –ü–æ–ª–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- `GET /api/v1/analytics/demographics` - –î–µ–º–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- `GET /api/v1/analytics/interests` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤
- `GET /api/v1/analytics/behavior` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- .NET 9.0 SDK
- SQL Server LocalDB (–¥–ª—è production —Ä–µ–∂–∏–º–∞)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
dotnet restore
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
dotnet test
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ Controllers/          # API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îú‚îÄ‚îÄ Models/              # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ Data/                # –ö–æ–Ω—Ç–µ–∫—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ Services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ DTOs/                # –û–±—ä–µ–∫—Ç—ã –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ Middleware/          # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ middleware
‚îî‚îÄ‚îÄ Examples/            # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `ASPNETCORE_ENVIRONMENT` - —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `FORCE_SQLITE` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SQLite

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `src/appsettings.json` - –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **Swagger UI**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è –≤—Å–µ—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- **CORS**: –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ production
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ